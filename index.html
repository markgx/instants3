<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>instants.nu - an Instagram web viewer</title>
  <link rel="stylesheet" href="assets/styles.css"></link>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.9/jquery.transit.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
  <script src="assets/instalib.js"></script>
  <script src="assets/application.js"></script>

  <script type="text/javascript">
    window.options = {
      imageLength: 275,
      intervalMS: 2000,
      fadeDelayMS: 15000,
      fadeOutMS: 5000,
      clientID: '1e4ea3f6ea2a49899f32429d9a53566b',
      callbackURL: 'http://localhost:8000/'
    };

    var instagram;
    var accessToken = null;

    if (window.location.hash) {
      accessToken = window.location.hash.replace('#access_token=', '');
      instagram = new Instagram(options.clientID, options.callbackURL, '', accessToken);
    } else {
      instagram = new Instagram(options.clientID, options.callbackURL, '');
      instagram.authorize();
    }

    $(document).ready(function() {
      instagram.getPopularFeed(function(result) {
        window.images = _.map(result.data, function(o) {
          return o.images.low_resolution.url
        });

        // preload images
        $(window.images).each(function() {
          $('<img />').attr('src', this).appendTo('body').css('display','none');
        });
      });

      window.count = 0;
      window.interval = setInterval('showImage(images[window.count])', options.intervalMS);
    });
  </script>
</head>
<body>
  <div id="board"></div>
</body>
</html>
